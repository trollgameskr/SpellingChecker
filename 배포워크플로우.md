# 배포 워크플로우 다이어그램

## 전체 배포 프로세스

```
┌─────────────────────────────────────────────────────────────┐
│                    SpellingChecker 소스 코드                    │
│                   (GitHub Repository)                        │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ├─────────────┬─────────────┬─────────────────┐
                         │             │             │                 │
                         ▼             ▼             ▼                 ▼
              ┌──────────────┐ ┌─────────────┐ ┌──────────┐  ┌──────────────┐
              │ 자동 빌드     │ │  개발자 PC   │ │ 로컬     │  │ GitHub       │
              │ (GitHub      │ │              │ │ 테스트    │  │ Actions      │
              │  Actions)    │ │              │ │          │  │ (자동)       │
              └──────┬───────┘ └──────┬───────┘ └────┬─────┘  └──────┬───────┘
                     │                │              │                │
                     │                │              │                │
                     ▼                ▼              ▼                ▼
```

## 배포 옵션별 워크플로우

### 옵션 1: MSI 인스톨러 (전문가용)

```
1. 빌드 스크립트 실행
   ┌────────────────────────────┐
   │ build-installer.ps1        │  또는  build-installer.bat
   │ (PowerShell)               │        (배치 파일)
   └────────────┬───────────────┘
                │
                ▼
2. .NET 빌드 (dotnet publish)
   ┌────────────────────────────┐
   │ SpellingChecker.exe 생성    │
   │ (자체 포함, 단일 파일)       │
   └────────────┬───────────────┘
                │
                ▼
3. WiX 컴파일 (candle.exe)
   ┌────────────────────────────┐
   │ Product.wxs → .wixobj      │
   │ (WiX 소스 → 오브젝트)       │
   └────────────┬───────────────┘
                │
                ▼
4. WiX 링크 (light.exe)
   ┌────────────────────────────┐
   │ .wixobj → .msi             │
   │ (MSI 인스톨러 생성)          │
   └────────────┬───────────────┘
                │
                ▼
5. 최종 결과물
   ┌────────────────────────────────────────┐
   │ installer/                             │
   │   └─ SpellingCheckerSetup_v1.0.0.msi  │
   │                                        │
   │ 크기: ~15-20 MB                         │
   │ 형식: Windows MSI 인스톨러               │
   └────────────────────────────────────────┘
```

### 옵션 2: 포터블 ZIP (간편)

```
1. 빌드 스크립트 실행
   ┌────────────────────────────┐
   │ build-portable.ps1         │  또는  build-portable.bat
   │ (PowerShell)               │        (배치 파일)
   └────────────┬───────────────┘
                │
                ▼
2. .NET 빌드 (dotnet publish)
   ┌────────────────────────────┐
   │ SpellingChecker.exe 생성    │
   │ (자체 포함, 단일 파일)       │
   └────────────┬───────────────┘
                │
                ▼
3. 파일 복사
   ┌────────────────────────────┐
   │ dist/SpellingChecker-      │
   │   portable/                │
   │   ├─ SpellingChecker.exe   │
   │   ├─ README.md             │
   │   ├─ CONFIG.md             │
   │   ├─ LICENSE               │
   │   └─ PORTABLE-README.txt   │
   └────────────┬───────────────┘
                │
                ▼
4. ZIP 압축
   ┌────────────────────────────┐
   │ Compress-Archive           │
   │ (PowerShell)               │
   └────────────┬───────────────┘
                │
                ▼
5. 최종 결과물
   ┌────────────────────────────────────────────────────┐
   │ dist/                                              │
   │   └─ SpellingChecker-v1.0.0-portable-win-x64.zip  │
   │                                                    │
   │ 크기: ~15-20 MB                                     │
   │ 형식: ZIP 압축 파일 (설치 불필요)                     │
   └────────────────────────────────────────────────────┘
```

### 옵션 3: 단독 실행 파일 (가장 단순)

```
1. 빌드 명령어
   ┌──────────────────────────────────────┐
   │ dotnet publish                       │
   │   -c Release                         │
   │   -r win-x64                         │
   │   --self-contained                   │
   │   -p:PublishSingleFile=true          │
   └────────────┬─────────────────────────┘
                │
                ▼
2. 최종 결과물
   ┌─────────────────────────────────────────────────────────┐
   │ SpellingChecker/bin/Release/net9.0-windows/win-x64/     │
   │   publish/                                              │
   │     └─ SpellingChecker.exe                              │
   │                                                         │
   │ 크기: ~15-20 MB                                          │
   │ 형식: 단일 실행 파일 (자체 포함)                           │
   └─────────────────────────────────────────────────────────┘
```

## GitHub Actions 자동 빌드 워크플로우

```
┌──────────────────────────────────────────────────────────┐
│ 코드 푸시/PR → GitHub Repository                          │
└────────────┬─────────────────────────────────────────────┘
             │
             ▼
┌──────────────────────────────────────────────────────────┐
│ GitHub Actions 트리거                                      │
│ (.github/workflows/build.yml)                            │
└────────────┬─────────────────────────────────────────────┘
             │
             ├────────────────┬────────────────┬────────────┐
             ▼                ▼                ▼            ▼
      ┌──────────┐    ┌──────────┐    ┌──────────┐  ┌──────────┐
      │ 환경 설정 │    │ 의존성   │    │  빌드     │  │  배포     │
      │          │    │ 복원      │    │          │  │          │
      │ - .NET   │    │          │    │ - Publish │  │ - 실행   │
      │   SDK    │    │ dotnet   │    │ - 포터블  │  │   파일    │
      │ - Windows│    │ restore  │    │   ZIP     │  │ - ZIP    │
      │          │    │          │    │ - MSI*    │  │ - MSI*   │
      └──────────┘    └──────────┘    └──────────┘  └──────────┘
                                                            │
                                                            ▼
      ┌──────────────────────────────────────────────────────────┐
      │ Artifacts 업로드                                          │
      │                                                           │
      │ ├─ SpellingChecker-Standalone-win-x64                    │
      │ │    └─ SpellingChecker.exe                              │
      │ │                                                         │
      │ ├─ SpellingChecker-Portable-win-x64                      │
      │ │    └─ SpellingChecker-v1.0.0-portable-win-x64.zip      │
      │ │                                                         │
      │ └─ SpellingChecker-MSI-Installer (릴리스 시에만)           │
      │      └─ SpellingCheckerSetup.msi                         │
      └──────────────────────────────────────────────────────────┘
             │
             ▼
      ┌──────────────────────────────────────────────────────────┐
      │ 다운로드 가능                                              │
      │ GitHub → Actions 탭 → 워크플로우 실행 → Artifacts         │
      └──────────────────────────────────────────────────────────┘
```

## 사용자 설치 플로우

### MSI 인스톨러 사용 시

```
사용자
  │
  ├─ SpellingCheckerSetup_v1.0.0.msi 다운로드
  │
  ▼
MSI 파일 더블클릭
  │
  ▼
┌────────────────────────────────┐
│ Windows 설치 마법사             │
│                                │
│ 1. 환영 화면                    │
│ 2. 라이선스 동의                 │
│ 3. 설치 위치 선택                │
│ 4. 옵션 선택:                   │
│    □ 바탕화면 바로가기          │
│    □ 시작프로그램 등록          │
│ 5. 설치 진행                    │
│ 6. 완료                        │
│    □ 프로그램 바로 실행         │
└────────────┬───────────────────┘
             │
             ▼
┌────────────────────────────────┐
│ 설치 완료!                      │
│                                │
│ ✓ 시작 메뉴에 바로가기 생성      │
│ ✓ (선택) 바탕화면에 바로가기     │
│ ✓ (선택) 시작프로그램에 등록     │
│ ✓ Windows 설정에서 제거 가능    │
└────────────────────────────────┘
```

### 포터블 ZIP 사용 시

```
사용자
  │
  ├─ SpellingChecker-v1.0.0-portable-win-x64.zip 다운로드
  │
  ▼
원하는 폴더에 압축 해제
  │
  ▼
┌────────────────────────────────┐
│ SpellingChecker-portable/      │
│   ├─ SpellingChecker.exe       │
│   ├─ README.md                 │
│   ├─ CONFIG.md                 │
│   ├─ QUICKSTART.md             │
│   ├─ LICENSE                   │
│   └─ PORTABLE-README.txt       │
└────────────┬───────────────────┘
             │
             ▼
SpellingChecker.exe 실행
  │
  ▼
┌────────────────────────────────┐
│ 프로그램 실행!                  │
│                                │
│ ✓ 설치 불필요                   │
│ ✓ 어디서나 실행 가능             │
│ ✓ USB에서도 실행 가능            │
│ ✓ 삭제 시 폴더만 제거            │
└────────────────────────────────┘
```

## 도구 비교

```
┌──────────────┬──────────────┬──────────────┬──────────────┐
│              │ Inno Setup   │ WiX Toolset  │ PowerShell   │
│              │ (기존)        │ (새 MSI)     │ (새 ZIP)     │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ 비용          │ 💰 유료      │ ✅ 무료      │ ✅ 무료      │
│              │ (2025.10~)   │              │              │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ 라이선스      │ 상용         │ MS-PL        │ MIT          │
│              │              │ (오픈소스)    │ (오픈소스)    │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ 출력 형식     │ .exe         │ .msi         │ .zip         │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ 전문성        │ ⭐⭐⭐⭐⭐    │ ⭐⭐⭐⭐⭐    │ ⭐⭐⭐       │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ 기업 배포     │ ⭐⭐⭐       │ ⭐⭐⭐⭐⭐    │ ⭐⭐         │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ 사용 편의성   │ ⭐⭐⭐⭐     │ ⭐⭐⭐⭐     │ ⭐⭐⭐⭐⭐    │
├──────────────┼──────────────┼──────────────┼──────────────┤
│ 설치 필요     │ ❌           │ ❌           │ ✅           │
│ (사용자)      │              │              │ (설치 불필요) │
└──────────────┴──────────────┴──────────────┴──────────────┘
```

## 요약

```
┌─────────────────────────────────────────────────────────────┐
│                      ✅ 변경 완료!                            │
│                                                             │
│  기존: Inno Setup (유료) ❌                                  │
│  새로: 3가지 무료 옵션 ✅                                     │
│                                                             │
│  1. WiX MSI 인스톨러    - 전문적, 무료                       │
│  2. 포터블 ZIP          - 간편함, 무료                       │
│  3. 단독 실행 파일       - 가장 단순, 무료                    │
│                                                             │
│  모든 빌드 스크립트 제공:                                     │
│  - PowerShell (.ps1)                                        │
│  - 배치 파일 (.bat)                                          │
│                                                             │
│  GitHub Actions 자동 빌드 설정 완료!                         │
└─────────────────────────────────────────────────────────────┘
```
